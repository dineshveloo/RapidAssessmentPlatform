{"ast":null,"code":"const nodemailer = require('nodemailer');\n\nconst _require = require('../config/info'),\n      CLIENT_ORIGIN_NODE = _require.CLIENT_ORIGIN_NODE;\n\nconst email = function email(newUser) {\n  let transporter = nodemailer.createTransport({\n    host: \"smtp.gmail.com\",\n    port: 465,\n    secure: true,\n    // true for 465, false for other ports\n    auth: {\n      user: process.env.MAIL_USER,\n      pass: process.env.MAIL_PASS\n    }\n  });\n  let htmlTemplate = \"<br>Dear Admin,<br><br>\" + \"user with below details has requested to access RAP<br> <br>\" + \"userName: \" + newUser.name + \"<br>\" + \"email: <span>\" + newUser.email + \"</span><br>\" + \"company: \" + newUser.company + \"<br><br>\" + \"please click the below link to provide access <br><br>\" + \"<a href=\\\"\".concat(CLIENT_ORIGIN_NODE, \"/api/users/approve/\").concat(newUser.email, \"/\").concat(newUser._id, \"\\\">click to appove</a><br><br><br>\") + \"--------------------------------------------<br><br>\" + \"this is an auto generted email, please do not reply.<br><br>\" + \"--------------------------------------------<br><br>\";\n  let info = transporter.sendMail({\n    from: process.env.MAIL_USER,\n    to: \"anurao96@gmail.com\",\n    // list of receivers\n    subject: \"Access Request to RAP\",\n    // Subject line\n    html: htmlTemplate\n  });\n};\n\nmodule.exports = {\n  email\n};","map":{"version":3,"sources":["/Users/anu/Documents/RapidAssessmentPlatform/email/email.send.js"],"names":["nodemailer","require","CLIENT_ORIGIN_NODE","email","newUser","transporter","createTransport","host","port","secure","auth","user","process","env","MAIL_USER","pass","MAIL_PASS","htmlTemplate","name","company","_id","info","sendMail","from","to","subject","html","module","exports"],"mappings":"AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAD,CAA1B;;iBAC+BA,OAAO,CAAC,gBAAD,C;MAA9BC,kB,YAAAA,kB;;AAER,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAAUC,OAAV,EAAmB;AAC/B,MAAIC,WAAW,GAAGL,UAAU,CAACM,eAAX,CAA2B;AAC3CC,IAAAA,IAAI,EAAE,gBADqC;AAE3CC,IAAAA,IAAI,EAAE,GAFqC;AAG3CC,IAAAA,MAAM,EAAE,IAHmC;AAG7B;AACdC,IAAAA,IAAI,EAAE;AACJC,MAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,SADd;AAEJC,MAAAA,IAAI,EAAEH,OAAO,CAACC,GAAR,CAAYG;AAFd;AAJqC,GAA3B,CAAlB;AAUA,MAAIC,YAAY,GAAG,4BACjB,8DADiB,GAEjB,YAFiB,GAEFb,OAAO,CAACc,IAFN,GAEa,MAFb,GAGjB,eAHiB,GAGCd,OAAO,CAACD,KAHT,GAGiB,aAHjB,GAIjB,WAJiB,GAIHC,OAAO,CAACe,OAJL,GAIe,UAJf,GAKjB,wDALiB,uBAMLjB,kBANK,gCAMmCE,OAAO,CAACD,KAN3C,cAMoDC,OAAO,CAACgB,GAN5D,0CAOjB,sDAPiB,GAQjB,8DARiB,GASjB,sDATF;AAYA,MAAIC,IAAI,GAAGhB,WAAW,CAACiB,QAAZ,CAAqB;AAC9BC,IAAAA,IAAI,EAAEX,OAAO,CAACC,GAAR,CAAYC,SADY;AAE9BU,IAAAA,EAAE,EAAE,oBAF0B;AAEJ;AAC1BC,IAAAA,OAAO,EAAE,uBAHqB;AAGI;AAClCC,IAAAA,IAAI,EAAET;AAJwB,GAArB,CAAX;AAMD,CA7BD;;AA+BAU,MAAM,CAACC,OAAP,GAAiB;AACfzB,EAAAA;AADe,CAAjB","sourcesContent":["const nodemailer = require('nodemailer');\nconst { CLIENT_ORIGIN_NODE } = require('../config/info');\n\nconst email = function (newUser) {\n  let transporter = nodemailer.createTransport({\n    host: \"smtp.gmail.com\",\n    port: 465,\n    secure: true, // true for 465, false for other ports\n    auth: {\n      user: process.env.MAIL_USER,\n      pass: process.env.MAIL_PASS\n    },\n  });\n\n  let htmlTemplate = \"<br>Dear Admin,<br><br>\" +\n    \"user with below details has requested to access RAP<br> <br>\" +\n    \"userName: \" + newUser.name + \"<br>\" +\n    \"email: <span>\" + newUser.email + \"</span><br>\" +\n    \"company: \" + newUser.company + \"<br><br>\" +\n    \"please click the below link to provide access <br><br>\" +\n    `<a href=\"${CLIENT_ORIGIN_NODE}/api/users/approve/${newUser.email}/${newUser._id}\">click to appove</a><br><br><br>` +\n    \"--------------------------------------------<br><br>\" +\n    \"this is an auto generted email, please do not reply.<br><br>\" +\n    \"--------------------------------------------<br><br>\"\n    ;\n\n  let info = transporter.sendMail({\n    from: process.env.MAIL_USER,\n    to: \"anurao96@gmail.com\", // list of receivers\n    subject: \"Access Request to RAP\", // Subject line\n    html: htmlTemplate\n  })\n}\n\nmodule.exports = {\n  email\n}\n\n"]},"metadata":{},"sourceType":"script"}